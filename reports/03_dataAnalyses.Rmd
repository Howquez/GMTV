---
title: "3. Analyses Plan"
description: |
  Analyze and compare data
author:
  - name: Hauke Roggenkamp 
    url: https://github.com/Howquez
    affiliation: CLICCS
    affiliation_url: https://www.cliccs.uni-hamburg.de/
date: "`r Sys.Date()`"
bibliography: biblio.bib
output:
  distill::distill_article:
    toc: true
    toc_depth: 2
    toc_float: false
    code_folding: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)

library(data.table)
library(magrittr)
library(kableExtra)
library(downloadthis)
library(ggplot2)
library(wesanderson)
```


# Background 

In an attempt to incorporate uncertainty to @GACHTER2017's dynamic public goods game (DPGG), I plan to run a series of remote online experiments using oTree [@oTree]. The first experiment will replicate GÃ¤chter et al.'s NOPUNISH 10-period version as close as possible (given the remote circumstances). The current demo version of the experiment can be found [here](https://cliccs.herokuapp.com/). Click [here](https://github.com/Howquez/coopUncertainty) to visit the corresponding Github repository.

This report is the third in a series of reports covering this project. It reads the data prepared in the previous reports and analyzes them.

```{r readData}
load(file="../data/processed/rda/gaechter2017.rda")        # read gaechter
load(file="../data/processed/rda/gaechter2017_R1.rda")     # read gaechterFirstRound
load(file="../data/processed/rda/replication2021.rda")     # read replication
load(file="../data/processed/rda/replication2021_R1.rda")  # read replicationFirstRound
```

```{r cbind}
main <- rbindlist(list(replication, gaechter), 
                  use.names = TRUE)

R1   <- rbindlist(list(replicationFirstRound, gaechterFirstRound), 
                  use.names = TRUE)
```


# Graphs

```{r layout}
layout <- theme(panel.background = element_rect(fill = "white"),
                panel.grid = element_line(colour="gray", size=0),
                panel.grid.major.y = element_line(colour="gray", size=0.25),
                legend.key = element_rect(fill = "white"),
                axis.line.x.bottom = element_line(size = 0.25),
                axis.line.y.left = element_line(size = 0.25),
                plot.margin = unit(c(1,1,1,1), "cm"),
                legend.title = element_blank()
                )
```

```{r firstRound}
ggplot(R1, aes(y=othersContribution, x=belief)) +
  layout +
  geom_abline(intercept = 0, slope = 1, linetype="dashed", alpha = 0.66) +
  geom_point() +
  geom_point(color = wes_palette("Moonrise3")[1]) +
  scale_y_continuous(expand = c(0, 0), limits = c(0, 60)) +
  scale_x_continuous(expand = c(0, 0), limits = c(0, 60))

ggplot(R1, aes(y=ownContribution, x=belief/3)) +
  layout +
  geom_abline(intercept = 0, slope = 1, linetype="dashed", alpha = 0.66)+ 
  geom_point() +
  geom_point(color = wes_palette("Moonrise3")[1]) +
  scale_y_continuous(expand = c(0, 0), limits = c(0, 25)) +
  scale_x_continuous(expand = c(0, 0), limits = c(0, 25))

ggplot(R1, aes(y=ownContribution, x=othersContribution/3)) +
  layout +
  geom_abline(intercept = 0, slope = 1, linetype="dashed", alpha = 0.66) +
  geom_point(color = wes_palette("Moonrise3")[1]) +
  scale_y_continuous(expand = c(0, 0), limits = c(-1, 25)) +
  scale_x_continuous(expand = c(0, 0), limits = c(-1, 25))
  
```

